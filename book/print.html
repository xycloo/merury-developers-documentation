<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Mercury Developers Documentation</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="get-started.html"><strong aria-hidden="true">1.</strong> Get Started</a></li><li class="chapter-item expanded "><a href="requesting-access.html"><strong aria-hidden="true">2.</strong> Request Access</a></li><li class="chapter-item expanded "><a href="releases.html"><strong aria-hidden="true">3.</strong> Current endpoints</a></li><li class="chapter-item expanded affix "><li class="part-title">Subscriptions</li><li class="chapter-item expanded "><a href="why-subscriptions.html"><strong aria-hidden="true">4.</strong> Subscriptions: What and Why</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="contract-event-subscription.html"><strong aria-hidden="true">4.1.</strong> Contract events</a></li><li class="chapter-item expanded "><a href="ledger-entries-subscription.html"><strong aria-hidden="true">4.2.</strong> Ledger entries</a></li><li class="chapter-item expanded "><a href="ledger-entries-expiration-subscription.html"><strong aria-hidden="true">4.3.</strong> Ledger etries expiration</a></li><li class="chapter-item expanded "><a href="full-account-subscription.html"><strong aria-hidden="true">4.4.</strong> Full account subscriptions - Stellar Classic</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Queries</li><li class="chapter-item expanded "><a href="querying.html"><strong aria-hidden="true">5.</strong> Before querying</a></li><li class="chapter-item expanded "><a href="contract-events.html"><strong aria-hidden="true">6.</strong> Contract Events</a></li><li class="chapter-item expanded "><a href="query-ledger-entries.html"><strong aria-hidden="true">7.</strong> Ledger entries</a></li><li class="chapter-item expanded "><a href="stellar-classic-querying.html"><strong aria-hidden="true">8.</strong> Stellar classic</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="payments.html"><strong aria-hidden="true">8.1.</strong> Payments</a></li><li class="chapter-item expanded "><a href="create-account.html"><strong aria-hidden="true">8.2.</strong> Create Account OPs</a></li><li class="chapter-item expanded "><a href="path-payemnt-strict-receive.html"><strong aria-hidden="true">8.3.</strong> Path payments (strict receive)</a></li><li class="chapter-item expanded "><a href="path-payemnt-strict-send.html"><strong aria-hidden="true">8.4.</strong> Path payments (strict send)</a></li><li class="chapter-item expanded "><a href="manage-sell-offer.html"><strong aria-hidden="true">8.5.</strong> Manage sell offer</a></li><li class="chapter-item expanded "><a href="manage-buy-offer.html"><strong aria-hidden="true">8.6.</strong> Manage buy offer</a></li><li class="chapter-item expanded "><a href="create-passive-sell-offer.html"><strong aria-hidden="true">8.7.</strong> Create passive sell offer</a></li><li class="chapter-item expanded "><a href="change-trust.html"><strong aria-hidden="true">8.8.</strong> Change trust</a></li><li class="chapter-item expanded "><a href="allow-trust.html"><strong aria-hidden="true">8.9.</strong> Allow trust</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Mercury Developers Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="get-started"><a class="header" href="#get-started">Get Started</a></h1>
<p>Welcome to Mercury's documentation for developers. This rust book is meant to give you a complete understanding of
Mercury's features and what you need in getting started using Mercury's preview releases as the indexer for your
services, apps, and protocols; so if some points need clarification don't hesitate to let us know by opening an issue
on Github.</p>
<br/>
<h1 id="mercury-a-managed-indexing-service"><a class="header" href="#mercury-a-managed-indexing-service">Mercury: a Managed Indexing Service</a></h1>
<p>Let's start off by saying that Mercury is a managed indexing service, which means that we control on our servers
everything ranging from ingestion to the GraphQL API. </p>
<p>This design choice is likely what will impact more your decision in choosing an indexer, here are some of the
pros and cons of using a managed indexer service.</p>
<blockquote>
<p>Note: these charateristics aren't about Mercury specifically, they are about the advantages and disadvantages
of relying on a managed indexing service.</p>
</blockquote>
<h4 id="pros-of-a-managed-service"><a class="header" href="#pros-of-a-managed-service">Pros of a managed service.</a></h4>
<ul>
<li>
<p>No need for a setup and development of any kind.</p>
<ul>
<li>this also includes not needing to worry about DB structure and its efficiency</li>
</ul>
</li>
<li>
<p>No need of performing maintenance. There is no workload that is streamlined to the user, so also no workload
in having to stay up to date with the code, dependencies, etc.</p>
</li>
<li>
<p>Cheaper. In most circumnstances, using a managed indexer is cheaper than running and maintaining your own instance.
Also, you might want to account for development costs, which are non-existing when relying on a managed service.</p>
</li>
<li>
<p>Security. While it's true that you don't have control over the security of the product you're relying to,
our team does. We are committed to building a secure product and also have a solid background in security research.</p>
</li>
<li>
<p>Smoother experience. Generally, managed services can offer a smoother experience due to the nature of their design,
including also more specific support.</p>
</li>
</ul>
<h4 id="pros-of-a-self-hosted-service"><a class="header" href="#pros-of-a-self-hosted-service">Pros of a self-hosted service.</a></h4>
<ul>
<li>
<p>Vendor lock-in. When you're running your own indexer you don't have much constraints around which server you use and
you don't have to worry about lack of availability on the service's end. For example, if you want to migrate to another
service, self-hosted services offer a much smoother experience, and in some managed service that is not even an option.</p>
</li>
<li>
<p>Customization. As you're actually building the service yourself, you can give it the shape you want. In some situations
where very high customization degrees are needed, relying on a self-hosted service reduces a lot of workload for the
client.</p>
</li>
</ul>
<br/>
<p>You can understand that the choicce depends on you use case and needs. If you'd like to get help in understanding if
Mercury fits your requirements you can ask on our team's public discord server.</p>
<p>Anyways, for Mercury we are committed to lowering the gaps between a self-hosted solution's pros and a managed's cons. 
In fact:</p>
<ul>
<li>
<p>we tackle customizability by developing and integrating in Mercury the Zephyr VM, xyclooLab's WebAssembly VM for 
communication between the Stellar Network's data and the guest environemnt. Users that wish to have full customizability
(and also additional perks) can write their logic in any WASM-compatible language and deploy it to Mercury's cloud
execution environment. Read more about Zephyr in our blog <a href="https://blog.xycloo.com/blog/introducing-zephyr">here - introduction</a> 
and <a href="https://blog.xycloo.com/blog/zephyr-pre-alpha-preview">here - an experimental Zephyr program</a>.</p>
<ul>
<li>also, we generally don't envision Mercury itself not to cover most use cases, even those who need some customizability.
Our extensive knowledge of Stellar + Soroban structures, dynamics, and logics are helping us to craft an implementation
that will fit most use cases for developers. This is also why we have developed the Zephyr Virtual Machine with also other features
in mind.</li>
</ul>
</li>
<li>
<p>there isn't really a way of tackling vendor lock and ensuring availability over time, but:</p>
<ul>
<li>we're committed with working with users that wish to migrate in order to provide
the cleanest migration experience as possible. In our mind we have DB write channels, but
this is not going to be prioritized and included in the first releases. </li>
<li>while it is not possible for us to, at least currently, guarantee consistent availability over time, our team is committed
to do so. We have been working on Stellar for more than two years and have strong ties with the community, of which we
are also a part.</li>
</ul>
</li>
</ul>
<br/>
<h2 id="pricing"><a class="header" href="#pricing">Pricing</a></h2>
<p>While we don't have yet any hard numbers on pricing, we have defined a very solid model that involves
down-payments and reimbursements. The main advantages of our cost model are:</p>
<ul>
<li>very cost efficient: you only pay for the data you request to store, and for the amount
of data you're actually occupying in our database. </li>
<li>efficiency in managing payments: you know exactly how much you'll spend at most.</li>
<li>payments are performed through stellar payments.</li>
</ul>
<p>If you're interested in learning more, we suggest checking out our <a href="https://docs.google.com/document/d/16rgq5mopskhU4CFE69VAi--IsCxNDeNjBlb-buidl08">SCF presentation document</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="request-access"><a class="header" href="#request-access">Request Access</a></h1>
<p>Mercury is a complex product and is still in development, so access is not open. However,
we grant preview access to anyone who is interested. Just let us know in the <a href="">discord server</a>, or
by reaching out on discord to <code>heytdep</code> or <code>itsfederico</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="current-endpoints"><a class="header" href="#current-endpoints">Current endpoints</a></h1>
<div class="table-wrapper"><table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>BACKEND</td><td>http://ec2-16-170-242-7.eu-north-1.compute.amazonaws.com:3030/</td></tr>
<tr><td>GraphQl</td><td>http://ec2-16-170-242-7.eu-north-1.compute.amazonaws.com:5000/graphiql</td></tr>
<tr><td>GraphiQl</td><td>http://ec2-16-170-242-7.eu-north-1.compute.amazonaws.com:5000/graphql</td></tr>
</tbody></table>
</div>
<p>Mercury is still under development so the above endpoints (besides being still http) might change.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="subscriptions-what-and-why"><a class="header" href="#subscriptions-what-and-why">Subscriptions: What and Why</a></h1>
<p>As you've read in the introduction, Mercury only stores the data you request. This translates to us adopting
our so-called &quot;subscriptions-based&quot; model.</p>
<p>The &quot;subscriptions-based&quot; model consists in users having to create subscriptions through our
subscriptions backend. </p>
<blockquote>
<p>Note: When Mercury will release its first stable release, payments to Mercury
will begin when creating the subscription.</p>
</blockquote>
<p>A user subscription defines the charateristics that the Network data ingested by Mercury's ingestor
must have in order to be stored on our database (thus subsequently queried). </p>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<p>Imagine having a factory contract. You'd want to be able to keep track of the contracts
deployed by your factory, and your factory contract emits a contract event <code>(Symbol(&quot;deploy&quot;), created_by, deployed_id)</code>
whenever it deployed a new contract.</p>
<p>If you go for an event-based approach, you can set up a subscription to all contract events for all your
factory's <code>&quot;deploy&quot;</code> events:</p>
<p>Subscription:</p>
<pre><code class="language-json">{
	&quot;contract_id&quot; : &quot;contract id (as strkey)&quot;,
	&quot;max_single_size&quot;: 144,
	&quot;topic1&quot;: &quot;'deploy' as base64 xdr&quot;
}
</code></pre>
<blockquote>
<p><code>max_single_size</code> is the maximum amount of bytes a single event can reach.</p>
</blockquote>
<h2 id="about-subscription-customizability"><a class="header" href="#about-subscription-customizability">About subscription customizability</a></h2>
<p>Subscruptions offer a good level of customizability in the data you want to be able to query. Say for example
in the example above you only want to store <code>deploy</code> events where <code>created_by</code> is a specific address, you 
can easily achive this by making the subscription look like:</p>
<pre><code class="language-json">{
	&quot;contract_id&quot; : &quot;contract id (as strkey)&quot;,
	&quot;max_single_size&quot;: 144,
	&quot;topic1&quot;: &quot;'deploy' as base64 xdr&quot;,
	&quot;topic2&quot;: &quot;specific address as base64 xdr&quot;,
}
</code></pre>
<p>You could also subscribe to all the contract's event with</p>
<pre><code class="language-json">{
	&quot;contract_id&quot; : &quot;contract id (as strkey)&quot;,
	&quot;max_single_size&quot;: 144,
}
</code></pre>
<br/>
<p>In the next sections of the documentation, we'll guide you through how to create subscriptions to the currently indexed
data structures.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="creating-contract-event-subscriptions"><a class="header" href="#creating-contract-event-subscriptions">Creating contract event subscriptions</a></h1>
<p>To create a new subscription to a contract event, refer to the following API:</p>
<p><strong>endpoint</strong>: INSTANCE:3030/event
<strong>method</strong>: POST
<strong>content-type</strong>: application/json
<strong>auth</strong>: &quot;Authorization: Bearer YOUR_JWT_ACCESS_TOKEN&quot;
<strong>body</strong>:</p>
<pre><code class="language-json">{&quot;contract_id&quot;: &quot;CONTRACT_ID&quot;, &quot;topic1&quot;: &quot;XDR&quot;, &quot;topic2&quot;: &quot;XDR&quot;, &quot;topic3&quot;: &quot;XDR&quot;, &quot;topic4&quot;: &quot;XDR&quot;, &quot;max_single_size&quot;: &quot;MAX_EVENT_BYTE_SIZE as integer&quot;}
</code></pre>
<p>As you can see, you can choose to be as specific as you want with the events you subscribe to. You can leave fields (contract_id, topic1, topic2, topic3, topic4) null to have the field match with any value, for example, setting the contract id to null and the first topic to transfer matches with all transfer events from all contracts. </p>
<p>We also set the max single size parameter which indicates how much will one event cost us at most (for now that we don't have the metering running, you can also set to the network's max so like 2000 bytes). </p>
<h2 id="example-1"><a class="header" href="#example-1">Example</a></h2>
<p>This example subscribes to all events of xycLoans' XLM pool:</p>
<pre><code class="language-curl"> curl --header &quot;Content-Type: application/json&quot; \
  --request POST \
  --data '{&quot;contract_id&quot;:&quot;CCVP5K2R2X4RWSJB7WZDDYVWHWDUUZWBWHLFPSZBIDOAWXH3LX6GG5PU&quot;, &quot;max_single_size&quot;: 200}' -H &quot;Authorization: Bearer YOUR_JWT_ACCESS_TOKEN&quot; \
  BACKEND/event
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ledger-entries"><a class="header" href="#ledger-entries">Ledger entries</a></h1>
<p>Mercury also allows to easily record state changes. This is especially useful in scenarios where
events alone don't give you enough context. When you subscribe to a ledger entry update for a contract
you are subscribing to the contract instance, to a presistent, or to temporary entry.</p>
<p>To create a new subscription to a ledger entry, refer to the following API:</p>
<p><strong>endpoint</strong>: INSTANCE:3030/entry
<strong>method</strong>: POST
<strong>content-type</strong>: application/json
<strong>auth</strong>: &quot;Authorization: Bearer YOUR_JWT_ACCESS_TOKEN&quot;
<strong>body</strong>:</p>
<pre><code class="language-json">{&quot;contract_id&quot;: &quot;CONTRACT_ID&quot;, &quot;key_xdr&quot;: &quot;entry key as base64 xdr&quot;, &quot;max_single_size&quot;: &quot;MAX_ENTRY_BYTE_SIZE as integer&quot;}
</code></pre>
<h3 id="example-2"><a class="header" href="#example-2">Example</a></h3>
<p>To subscribe to a contract's instance updates:</p>
<pre><code>curl --header &quot;Content-Type: application/json&quot; \
  --request POST \
  --data '{&quot;contract_id&quot;:&quot;contract id&quot;, &quot;key_xdr&quot;: &quot;AAAAFA==&quot;, &quot;max_single_size&quot;: 64000}' -H &quot;Authorization: Bearer $JWT_TOKEN&quot; \
  BACKEND/entry
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ledger-etries-expiration"><a class="header" href="#ledger-etries-expiration">Ledger etries expiration</a></h1>
<p>Soroban introduces the novel concept of state expiration, and it's essential that developers and users
are able to efficiently know the expiration state of their entries.</p>
<p>To create a new subscription to a ledger entry expiration, refer to the following API:</p>
<p><strong>endpoint</strong>: INSTANCE:3030/expiration
<strong>method</strong>: POST
<strong>content-type</strong>: application/json
<strong>auth</strong>: &quot;Authorization: Bearer YOUR_JWT_ACCESS_TOKEN&quot;
<strong>body</strong>:</p>
<pre><code class="language-json">{&quot;hash_xdr&quot;: &quot;base64 xdr of your entry's hash&quot;}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="full-account-subscriptions---stellar-classic"><a class="header" href="#full-account-subscriptions---stellar-classic">Full account subscriptions - Stellar Classic</a></h1>
<p>Mercury aims to also enable efficient indexing of all stellar classic operations. Currently, 
we do so through full account subscriptions. These are stellar account-centered subscriptions, 
and a subscription for an account will tell mercury to index all the currently supported operations
that encompass the specified stellar account.</p>
<p>Currently-supported stellar classic operations are:</p>
<ul>
<li>payments</li>
<li>createaccount</li>
</ul>
<p>To create a full account subscription, refer to the following API:</p>
<p><strong>endpoint</strong>: INSTANCE:3030/account
<strong>method</strong>: POST
<strong>content-type</strong>: application/json
<strong>auth</strong>: &quot;Authorization: Bearer YOUR_JWT_ACCESS_TOKEN&quot;
<strong>body</strong>:</p>
<pre><code class="language-json">{&quot;publickey&quot;: &quot;public key of the account (strkey)&quot;}
</code></pre>
<h2 id="example-3"><a class="header" href="#example-3">Example</a></h2>
<pre><code>curl --header &quot;Content-Type: application/json&quot; \
  --request POST \
  --data '{&quot;publickey&quot;:&quot;GDEFZKAH3SDHKR6OJYNORMTQY7QB44EJX5BL6WHVZBDQKOYO7BHEBC5C&quot;}' -H &quot;Authorization: Bearer $JWT_TOKEN&quot; \                         
  BACKEND/account

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="before-querying"><a class="header" href="#before-querying">Before querying</a></h1>
<p>Before you start querying, remember that you need to have subscriptions in place.</p>
<p>Mercury will not store nor grant you access to data that isn't covered by a subscription.</p>
<p>For example, if you want to index all leder entries for two contracts, you need to perform two <a href="./ledger-entries-subscription.html">ledger entry subscriptions</a>.</p>
<p>Make sure you checked out the <a href="./why-subscriptions.html">subscriptions</a> chapter.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contract-events"><a class="header" href="#contract-events">Contract Events</a></h1>
<p>Assuming that you have a subscription targeted to the events you are indexing,
below are some instructions to get started making some more specific queries.</p>
<h2 id="events-by-contract-id"><a class="header" href="#events-by-contract-id">Events by contract id</a></h2>
<p>In this example, we're querying events (within the constraints of our subscription) for Testnet's
native token contract.</p>
<pre><code class="language-grapqhl">query MyQuery {
  eventByContractId(
    searchedContractId: &quot;CDLZFC3SYJYDZT7K67VZ75HPJVIEUVNIXF47ZG2FB2RMQQVU2HHGCYSC&quot;
  ) {
    edges {
      node {
        contractId
        data
        ledger
        ledgerTimestamp
        topic2
        topic1
        topic4
        topic3
      }
    }
  }
}
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;data&quot;: {
    &quot;eventByContractId&quot;: {
      &quot;edges&quot;: [
        {
          &quot;node&quot;: {
            &quot;contractId&quot;: &quot;CDLZFC3SYJYDZT7K67VZ75HPJVIEUVNIXF47ZG2FB2RMQQVU2HHGCYSC&quot;,
            &quot;data&quot;: &quot;AAAACgAAAAAAAAAAAAAAAAX14QA=&quot;,
            &quot;ledger&quot;: 1976715,
            &quot;ledgerTimestamp&quot;: 1697125133,
            &quot;topic2&quot;: &quot;AAAAEgAAAAAAAAAAlgxjlS3RNgkTERctfeiCrlUtOyt9BCzR4tRDDY9zmIE=&quot;,
            &quot;topic1&quot;: &quot;AAAADwAAAAh0cmFuc2Zlcg==&quot;,
            &quot;topic4&quot;: &quot;AAAADgAAAAZuYXRpdmUAAA==&quot;,
            &quot;topic3&quot;: &quot;AAAAEgAAAAFkp3At7J1OWk8PiDhUMY2lWuneIYknC4OsmpJHxEYR7Q==&quot;
          }
        },
        {
          &quot;node&quot;: {
            &quot;contractId&quot;: &quot;CDLZFC3SYJYDZT7K67VZ75HPJVIEUVNIXF47ZG2FB2RMQQVU2HHGCYSC&quot;,
            &quot;data&quot;: &quot;AAAACgAAAAAAAAAAAAAAAAABgnY=&quot;,
            &quot;ledger&quot;: 1977257,
            &quot;ledgerTimestamp&quot;: 1697127978,
            &quot;topic2&quot;: &quot;AAAAEgAAAAAAAAAAtXs1DVecP4w3jdgAVoD8DDcUkSryRVL3pjWQIbk1EZY=&quot;,
            &quot;topic1&quot;: &quot;AAAADwAAAAh0cmFuc2Zlcg==&quot;,
            &quot;topic4&quot;: &quot;AAAADgAAAAZuYXRpdmUAAA==&quot;,
            &quot;topic3&quot;: &quot;AAAAEgAAAAAAAAAAPTdgJsV5ZyTSlS3RBk3s+JcreccjoCp3Vj7Z8jmU26k=&quot;
          }
        },
        {
          &quot;node&quot;: {
            &quot;contractId&quot;: &quot;CDLZFC3SYJYDZT7K67VZ75HPJVIEUVNIXF47ZG2FB2RMQQVU2HHGCYSC&quot;,
            &quot;data&quot;: &quot;AAAACgAAAAAAAAAAAAAAAAAAA+g=&quot;,
            &quot;ledger&quot;: 1977723,
            &quot;ledgerTimestamp&quot;: 1697130446,
            &quot;topic2&quot;: &quot;AAAAEgAAAAAAAAAAJYf9NMqmC02G4br+I6LKzbfLvGV8QeiHblDN8VQtkyI=&quot;,
            &quot;topic1&quot;: &quot;AAAADwAAAAh0cmFuc2Zlcg==&quot;,
            &quot;topic4&quot;: &quot;AAAADgAAAAZuYXRpdmUAAA==&quot;,
            &quot;topic3&quot;: &quot;AAAAEgAAAAAAAAAAf1sKj1rp5aRGdzj/pa4Yh0Jg83YJhhCmvWdqZoi4zks=&quot;
          }
        },
        {
          &quot;node&quot;: {
            &quot;contractId&quot;: &quot;CDLZFC3SYJYDZT7K67VZ75HPJVIEUVNIXF47ZG2FB2RMQQVU2HHGCYSC&quot;,
            &quot;data&quot;: &quot;AAAACgAAAAAAAAAAAAAAAlQL5AA=&quot;,
            &quot;ledger&quot;: 1977738,
            &quot;ledgerTimestamp&quot;: 1697130525,
            &quot;topic2&quot;: &quot;AAAAEgAAAAAAAAAAJYf9NMqmC02G4br+I6LKzbfLvGV8QeiHblDN8VQtkyI=&quot;,
            &quot;topic1&quot;: &quot;AAAADwAAAAh0cmFuc2Zlcg==&quot;,
            &quot;topic4&quot;: &quot;AAAADgAAAAZuYXRpdmUAAA==&quot;,
            &quot;topic3&quot;: &quot;AAAAEgAAAAAAAAAAf1sKj1rp5aRGdzj/pa4Yh0Jg83YJhhCmvWdqZoi4zks=&quot;
          }
        },
        {
          &quot;node&quot;: {
            &quot;contractId&quot;: &quot;CDLZFC3SYJYDZT7K67VZ75HPJVIEUVNIXF47ZG2FB2RMQQVU2HHGCYSC&quot;,
            &quot;data&quot;: &quot;AAAACgAAAAAAAAAAAAAAAAX14QA=&quot;,
            &quot;ledger&quot;: 1978025,
            &quot;ledgerTimestamp&quot;: 1697132038,
            &quot;topic2&quot;: &quot;AAAAEgAAAAAAAAAAlgxjlS3RNgkTERctfeiCrlUtOyt9BCzR4tRDDY9zmIE=&quot;,
            &quot;topic1&quot;: &quot;AAAADwAAAAh0cmFuc2Zlcg==&quot;,
            &quot;topic4&quot;: &quot;AAAADgAAAAZuYXRpdmUAAA==&quot;,
            &quot;topic3&quot;: &quot;AAAAEgAAAAAAAAAADrWdipCyvgYDlv6kRpdNchs5UGHB3Dsol3VHKAS2tYE=&quot;
          }
        }
      ]
    }
  }
}
</code></pre>
<blockquote>
<p>Note that the data for events is stored as base64-encoded XDR.</p>
</blockquote>
<h2 id="events-by-topics"><a class="header" href="#events-by-topics">Events by topics</a></h2>
<p>Mercury also allows you to query events given certain topics. For instance, let's index
all transfer events in our subscription to the address <code>GAHLLHMKSCZL4BQDS37KIRUXJVZBWOKQMHA5YOZIS52UOKAEW22YDSXX</code>:</p>
<pre><code class="language-graphql">query MyQuery {
  eventByTopic(
    t1: &quot;AAAADwAAAAh0cmFuc2Zlcg==&quot;
    t3: &quot;AAAAEgAAAAAAAAAADrWdipCyvgYDlv6kRpdNchs5UGHB3Dsol3VHKAS2tYE=&quot;
  ) {
    edges {
      node {
        contractId
        data
        ledger
        ledgerTimestamp
        topic1
        topic2
        topic3
        topic4
      }
    }
  }
}
</code></pre>
<p>sample response:</p>
<pre><code class="language-json">{
  &quot;data&quot;: {
    &quot;eventByTopic&quot;: {
      &quot;edges&quot;: [
        {
          &quot;node&quot;: {
            &quot;contractId&quot;: &quot;CDLZFC3SYJYDZT7K67VZ75HPJVIEUVNIXF47ZG2FB2RMQQVU2HHGCYSC&quot;,
            &quot;data&quot;: &quot;AAAACgAAAAAAAAAAAAAAAAX14QA=&quot;,
            &quot;ledger&quot;: 1978025,
            &quot;ledgerTimestamp&quot;: 1697132038,
            &quot;topic1&quot;: &quot;AAAADwAAAAh0cmFuc2Zlcg==&quot;,
            &quot;topic2&quot;: &quot;AAAAEgAAAAAAAAAAlgxjlS3RNgkTERctfeiCrlUtOyt9BCzR4tRDDY9zmIE=&quot;,
            &quot;topic3&quot;: &quot;AAAAEgAAAAAAAAAADrWdipCyvgYDlv6kRpdNchs5UGHB3Dsol3VHKAS2tYE=&quot;,
            &quot;topic4&quot;: &quot;AAAADgAAAAZuYXRpdmUAAA==&quot;
          }
        }
      ]
    }
  }
}
</code></pre>
<blockquote>
<p>Note: this assumes that you already know the exact structure of the events you're querying.
In this example we know that topic1 (t1) holds the event kind (Symbol(&quot;transfer&quot;) in our case)
and that topic3 (t3) holds an Address object for the public key <code>GAHLLHMKSCZL4BQDS37KIRUXJVZBWOKQMHA5YOZIS52UOKAEW22YDSXX</code>.
Building these xdrs must be done by the client and can be easily done with the existing
stellar xdr tooling. </p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="querying-ledger-entries"><a class="header" href="#querying-ledger-entries">Querying ledger entries</a></h1>
<h3 id="entries-by-contract-id"><a class="header" href="#entries-by-contract-id">Entries by contract id</a></h3>
<pre><code class="language-graphql">query EntriesByContractId {
  entryUpdateByContractId(
    contract: &quot;CDSFM6YQ5PBC3QZT5CSJNMROM355RE2OFIWBMQZHEXBJGCQYJW6JFO75&quot;
  ) {
    nodes {
      contractId
      entryDurability
      keyXdr
      ledger
      ledgerTimestamp
      valueXdr
    }
  }
}
</code></pre>
<h4 id="example-response"><a class="header" href="#example-response">Example response</a></h4>
<pre><code class="language-json">{
  &quot;data&quot;: {
    &quot;entryUpdateByContractId&quot;: {
      &quot;nodes&quot;: [
        {
          &quot;contractId&quot;: &quot;CDSFM6YQ5PBC3QZT5CSJNMROM355RE2OFIWBMQZHEXBJGCQYJW6JFO75&quot;,
          &quot;entryDurability&quot;: &quot;PERSISTENT&quot;,
          &quot;keyXdr&quot;: &quot;AAAAFA==&quot;,
          &quot;ledger&quot;: 2043931,
          &quot;ledgerTimestamp&quot;: 1697478387,
          &quot;valueXdr&quot;: &quot;AAAAEwAAAABSupsyUp3yF//KIautJd9SeXc+dBHo/b5Q7dAU1R1gggAAAAEAAAACAAAAEAAAAAEAAAABAAAADwAAAAdUb2tlbklkAAAAABIAAAAB15KLcsJwPM/q9+uf9O9NUEpVqLl5/JtFDqLIQrTRzmEAAAAQAAAAAQAAAAEAAAAPAAAACVRvdFN1cHBseQAAAAAAAAoAAAAAAAAAAAAAAAAL68IA&quot;
        },
        {
          &quot;contractId&quot;: &quot;CDSFM6YQ5PBC3QZT5CSJNMROM355RE2OFIWBMQZHEXBJGCQYJW6JFO75&quot;,
          &quot;entryDurability&quot;: &quot;PERSISTENT&quot;,
          &quot;keyXdr&quot;: &quot;AAAAEAAAAAEAAAACAAAADwAAABVGZWVQZXJTaGFyZVBhcnRpY3VsYXIAAAAAAAASAAAAAAAAAACWDGOVLdE2CRMRFy196IKuVS07K30ELNHi1EMNj3OYgQ==&quot;,
          &quot;ledger&quot;: 2043931,
          &quot;ledgerTimestamp&quot;: 1697478387,
          &quot;valueXdr&quot;: &quot;AAAACgAAAAAAAAAAAAAAAAAAAAA=&quot;
        },
        {
          &quot;contractId&quot;: &quot;CDSFM6YQ5PBC3QZT5CSJNMROM355RE2OFIWBMQZHEXBJGCQYJW6JFO75&quot;,
          &quot;entryDurability&quot;: &quot;PERSISTENT&quot;,
          &quot;keyXdr&quot;: &quot;AAAAEAAAAAEAAAACAAAADwAAAAdCYWxhbmNlAAAAABIAAAAAAAAAAJYMY5Ut0TYJExEXLX3ogq5VLTsrfQQs0eLUQw2Pc5iB&quot;,
          &quot;ledger&quot;: 2043931,
          &quot;ledgerTimestamp&quot;: 1697478387,
          &quot;valueXdr&quot;: &quot;AAAACgAAAAAAAAAAAAAAAAvrwgA=&quot;
        },
		....
	]
    }
  }
}
</code></pre>
<h3 id="entries-by-contract-id-and-data"><a class="header" href="#entries-by-contract-id-and-data">Entries by contract id and data</a></h3>
<pre><code class="language-graphql">query EntriesByContractId {
  entryUpdateByContractIdAndKey(
    contract: &quot;CDSFM6YQ5PBC3QZT5CSJNMROM355RE2OFIWBMQZHEXBJGCQYJW6JFO75&quot;
    ledgerKey: &quot;AAAAEAAAAAEAAAACAAAADwAAAAdCYWxhbmNlAAAAABIAAAAAAAAAAJYMY5Ut0TYJExEXLX3ogq5VLTsrfQQs0eLUQw2Pc5iB&quot;
  ) {
    nodes {
      contractId
      entryDurability
      keyXdr
      ledger
      ledgerTimestamp
      valueXdr
    }
  }
}
</code></pre>
<h4 id="example-response-1"><a class="header" href="#example-response-1">Example response</a></h4>
<pre><code class="language-json">{
  &quot;data&quot;: {
    &quot;entryUpdateByContractIdAndKey&quot;: {
      &quot;nodes&quot;: [
        {
          &quot;contractId&quot;: &quot;CDSFM6YQ5PBC3QZT5CSJNMROM355RE2OFIWBMQZHEXBJGCQYJW6JFO75&quot;,
          &quot;entryDurability&quot;: &quot;PERSISTENT&quot;,
          &quot;keyXdr&quot;: &quot;AAAAEAAAAAEAAAACAAAADwAAAAdCYWxhbmNlAAAAABIAAAAAAAAAAJYMY5Ut0TYJExEXLX3ogq5VLTsrfQQs0eLUQw2Pc5iB&quot;,
          &quot;ledger&quot;: 2043931,
          &quot;ledgerTimestamp&quot;: 1697478387,
          &quot;valueXdr&quot;: &quot;AAAACgAAAAAAAAAAAAAAAAvrwgA=&quot;
        },
        {
          &quot;contractId&quot;: &quot;CDSFM6YQ5PBC3QZT5CSJNMROM355RE2OFIWBMQZHEXBJGCQYJW6JFO75&quot;,
          &quot;entryDurability&quot;: &quot;PERSISTENT&quot;,
          &quot;keyXdr&quot;: &quot;AAAAEAAAAAEAAAACAAAADwAAAAdCYWxhbmNlAAAAABIAAAAAAAAAAJYMY5Ut0TYJExEXLX3ogq5VLTsrfQQs0eLUQw2Pc5iB&quot;,
          &quot;ledger&quot;: 2061071,
          &quot;ledgerTimestamp&quot;: 1697568458,
          &quot;valueXdr&quot;: &quot;AAAACgAAAAAAAAAAAAAAABHhowA=&quot;
        },
        {
          &quot;contractId&quot;: &quot;CDSFM6YQ5PBC3QZT5CSJNMROM355RE2OFIWBMQZHEXBJGCQYJW6JFO75&quot;,
          &quot;entryDurability&quot;: &quot;PERSISTENT&quot;,
          &quot;keyXdr&quot;: &quot;AAAAEAAAAAEAAAACAAAADwAAAAdCYWxhbmNlAAAAABIAAAAAAAAAAJYMY5Ut0TYJExEXLX3ogq5VLTsrfQQs0eLUQw2Pc5iB&quot;,
          &quot;ledger&quot;: 2061140,
          &quot;ledgerTimestamp&quot;: 1697568815,
          &quot;valueXdr&quot;: &quot;AAAACgAAAAAAAAAAAAAAABfXhAA=&quot;
        },
		...
	  ]
	  }
	}
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stellar-classic"><a class="header" href="#stellar-classic">Stellar classic</a></h1>
<p>Mercury allows indexing stellar classic operations throught full account subscriptions. Any operation
that encompasses an account you're subscribed to will be indexed on Mercury, for instance, whether it's your account
that's making the payment or receiving it, Mercury will index the payment.</p>
<p>This is especially useful for wallets looking to integrate Mercury as their source for all Soroban + Stellar data.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="indexing-payments"><a class="header" href="#indexing-payments">Indexing Payments</a></h1>
<p>Assuming that you already have a full account subscription for the account you wish to index
payments for, with Mercury you can query both payments from and to this account.</p>
<h2 id="from-account"><a class="header" href="#from-account">From account</a></h2>
<pre><code class="language-graphql">query MyQuery {
  paymentsByPublicKey(
    publicKeyText: &quot;GAQX75URIUYBKEUWDWPRTFBMTW6ZWMAGDMC7IBBA6XWTIDYOSE5LRXLE&quot;
  ) {
    edges {
      node {
        amount
        assetByAsset {
          code
          issuer
        }
        accountByDestination {
          publickey
        }
        accountBySource {
          publickey
        }
        muxedaccountByDestinationMuxed {
          publickey
          muxedaccountid
        }
        muxedaccountBySourceMuxed {
          publickey
          muxedaccountid
        }
        ledgerByLedger {
          closeTime
          sequence
        }
        assetNative
      }
    }
  }
}
</code></pre>
<p>Sample response:</p>
<pre><code class="language-json">{
  &quot;data&quot;: {
    &quot;paymentsToPublicKey&quot;: {
      &quot;edges&quot;: [
        {
          &quot;node&quot;: {
            &quot;amount&quot;: &quot;100000000&quot;,
            &quot;assetByAsset&quot;: null,
            &quot;accountByDestination&quot;: {
              &quot;publickey&quot;: &quot;GAHLLHMKSCZL4BQDS37KIRUXJVZBWOKQMHA5YOZIS52UOKAEW22YDSXX&quot;
            },
            &quot;accountBySource&quot;: {
              &quot;publickey&quot;: &quot;GAQX75URIUYBKEUWDWPRTFBMTW6ZWMAGDMC7IBBA6XWTIDYOSE5LRXLE&quot;
            },
            &quot;muxedaccountByDestinationMuxed&quot;: null,
            &quot;muxedaccountBySourceMuxed&quot;: null,
            &quot;ledgerByLedger&quot;: {
              &quot;closeTime&quot;: 1697129852,
              &quot;sequence&quot;: 1977611
            },
            &quot;assetNative&quot;: true
          }
        }
      ]
    }
  }
}
</code></pre>
<p>As you can see, there are some <code>null</code> fields in our response, and it's perfectly normal.
This is because:</p>
<ul>
<li>in Mercury, when an asset is queried the response can include either:
<ul>
<li>assetNative: when <code>true</code> it means the asset sent is XLM</li>
<li>assetByAsset: the asset object for non-native assets. When the asset being sent is not
xlm this field holds an object with the code and the issuer of the asset.</li>
</ul>
</li>
<li>The query is asking Mercury to look for payments that have been made:
<ol>
<li>from an account to another</li>
<li>from a muxed account to another muxed account</li>
<li>from an account to a muxed account</li>
<li>from a muxed account to an account.
For this payment we indexed, it's situation 1, so <code>muxedaccountByDestinationMuxed</code> and <code>muxedaccountBySourceMuxed</code>
are both null, but you can see the <code>accountBySource</code> and <code>accountByDestination</code> populated with
the receiver and destination public keys.</li>
</ol>
</li>
</ul>
<p>This data structure design makes queries very efficient on our end, and allows the client
to easily understand whether the asset sent is native or not, whether the source is muxed, etc.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="create-account-ops"><a class="header" href="#create-account-ops">Create Account OPs</a></h1>
<h2 id="account-created"><a class="header" href="#account-created">Account created</a></h2>
<pre><code class="language-graphql">query MyQuery {
  createAccountToPublicKey(
    publicKeyText: &quot;GAQX75URIUYBKEUWDWPRTFBMTW6ZWMAGDMC7IBBA6XWTIDYOSE5LRXLE&quot;
  ) {
    edges {
      node {
        accountByDestination {
          publickey
        }
        accountBySource {
          publickey
        }
        muxedaccountBySourceMuxed {
          publickey
          muxedaccountid
        }
        ledgerByLedger {
          closeTime
          sequence
        }
        startingBalance
      }
    }
  }
}

</code></pre>
<pre><code class="language-json">{
  &quot;data&quot;: {
    &quot;createAccountToPublicKey&quot;: {
      &quot;edges&quot;: [
        {
          &quot;node&quot;: {
            &quot;accountByDestination&quot;: {
              &quot;publickey&quot;: &quot;GAQX75URIUYBKEUWDWPRTFBMTW6ZWMAGDMC7IBBA6XWTIDYOSE5LRXLE&quot;
            },
            &quot;accountBySource&quot;: {
              &quot;publickey&quot;: &quot;GAIH3ULLFQ4DGSECF2AR555KZ4KNDGEKN4AFI4SU2M7B43MGK3QJZNSR&quot;
            },
            &quot;muxedaccountBySourceMuxed&quot;: null,
            &quot;ledgerByLedger&quot;: {
              &quot;closeTime&quot;: 1697129852,
              &quot;sequence&quot;: 1977611
            },
            &quot;startingBalance&quot;: &quot;100000000000&quot;
          }
        }
      ]
    }
  }
}
</code></pre>
<h2 id="account-created-from"><a class="header" href="#account-created-from">Account created from</a></h2>
<pre><code class="language-graphql">query MyQuery {
  createAccountByPublicKey(
    publicKeyText: &quot;GAIH3ULLFQ4DGSECF2AR555KZ4KNDGEKN4AFI4SU2M7B43MGK3QJZNSR&quot;
  ) {
    edges {
      node {
        accountByDestination {
          publickey
        }
        accountBySource {
          publickey
        }
        muxedaccountBySourceMuxed {
          publickey
          muxedaccountid
        }
        ledgerByLedger {
          closeTime
          sequence
        }
        startingBalance
      }
    }
  }
}
</code></pre>
<pre><code class="language-json">{
  &quot;data&quot;: {
    &quot;createAccountByPublicKey&quot;: {
      &quot;edges&quot;: [
        {
          &quot;node&quot;: {
            &quot;accountByDestination&quot;: {
              &quot;publickey&quot;: &quot;GAGTO2P23XRSRUGH7NIRH4GIZX55X77DWNHI6UMHN3JVMJJ2FRZKW2TS&quot;
            },
            &quot;accountBySource&quot;: {
              &quot;publickey&quot;: &quot;GAIH3ULLFQ4DGSECF2AR555KZ4KNDGEKN4AFI4SU2M7B43MGK3QJZNSR&quot;
            },
            &quot;muxedaccountBySourceMuxed&quot;: null,
            &quot;ledgerByLedger&quot;: {
              &quot;closeTime&quot;: 1697129852,
              &quot;sequence&quot;: 1977611
            },
            &quot;startingBalance&quot;: &quot;100000000000&quot;
          }
        },
        {
          &quot;node&quot;: {
            &quot;accountByDestination&quot;: {
              &quot;publickey&quot;: &quot;GAQX75URIUYBKEUWDWPRTFBMTW6ZWMAGDMC7IBBA6XWTIDYOSE5LRXLE&quot;
            },
            &quot;accountBySource&quot;: {
              &quot;publickey&quot;: &quot;GAIH3ULLFQ4DGSECF2AR555KZ4KNDGEKN4AFI4SU2M7B43MGK3QJZNSR&quot;
            },
            &quot;muxedaccountBySourceMuxed&quot;: null,
            &quot;ledgerByLedger&quot;: {
              &quot;closeTime&quot;: 1697129852,
              &quot;sequence&quot;: 1977611
            },
            &quot;startingBalance&quot;: &quot;100000000000&quot;
          }
        }
      ]
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="path-payments-strict-receive"><a class="header" href="#path-payments-strict-receive">Path payments (strict receive)</a></h1>
<h3 id="from-account-1"><a class="header" href="#from-account-1">From Account</a></h3>
<pre><code class="language-graphql">query FullQuery {
  pathPaymentsStrictSendByPublicKey(publicKeyText: &quot;$PUBLIC_KEY&quot;) {
    nodes {
      ledgerByLedger {
        closeTime
        sequence
      }
      accountBySource {
        publickey
      }
      accountByDestination {
        publickey
      }
      assetByDestAsset {
        code
        issuer
      }
      assetByPath1 {
        code
        issuer
      }
      assetByPath2 {
        code
        issuer
      }
      assetByPath3 {
        issuer
        code
      }
      assetByPath4 {
        issuer
        code
      }
      assetByPath5 {
        issuer
        code
      }
      assetBySendAsset {
        code
        issuer
      }
      destAssetNative
      destMin
      path1Native
      path2Native
      path3Native
      path4Native
      path5Native
      sendAmount
      sendAssetNative
    }
  }
}
</code></pre>
<h3 id="to-account"><a class="header" href="#to-account">To Account</a></h3>
<pre><code class="language-graphql">query FullQuery {
  pathPaymentsStrictSendToPublicKey(publicKeyText: &quot;$PUBLIC_KEY&quot;) {
    nodes {
      ledgerByLedger {
        closeTime
        sequence
      }
      accountBySource {
        publickey
      }
      accountByDestination {
        publickey
      }
      assetByDestAsset {
        code
        issuer
      }
      assetByPath1 {
        code
        issuer
      }
      assetByPath2 {
        code
        issuer
      }
      assetByPath3 {
        issuer
        code
      }
      assetByPath4 {
        issuer
        code
      }
      assetByPath5 {
        issuer
        code
      }
      assetBySendAsset {
        code
        issuer
      }
      destAssetNative
      destMin
      path1Native
      path2Native
      path3Native
      path4Native
      path5Native
      sendAmount
      sendAssetNative
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="path-payments-strict-send"><a class="header" href="#path-payments-strict-send">Path payments (strict send)</a></h1>
<h3 id="by-account"><a class="header" href="#by-account">By account</a></h3>
<pre><code class="language-graphql">query FullQuery {
  pathPaymentsStrictReceiveByPublicKey(publicKeyText: &quot;&quot;) {
    nodes {
      ledgerByLedger {
        closeTime
        sequence
      }
      accountBySource {
        publickey
      }
      accountByDestination {
        publickey
      }
      assetByDestAsset {
        code
        issuer
      }
      assetByPath1 {
        code
        issuer
      }
      assetByPath2 {
        code
        issuer
      }
      assetByPath3 {
        issuer
        code
      }
      assetByPath4 {
        issuer
        code
      }
      assetByPath5 {
        issuer
        code
      }
      assetBySendAsset {
        code
        issuer
      }
      destAssetNative
      path1Native
      path2Native
      path3Native
      path4Native
      path5Native
      sendAssetNative
      destAmount
      sendMax
    }
  }
}

</code></pre>
<h3 id="to-account-1"><a class="header" href="#to-account-1">To account</a></h3>
<pre><code class="language-graphql">query FullQuery {
  pathPaymentsStrictReceiveToPublicKey(publicKeyText: &quot;&quot;) {
    nodes {
      ledgerByLedger {
        closeTime
        sequence
      }
      accountBySource {
        publickey
      }
      accountByDestination {
        publickey
      }
      assetByDestAsset {
        code
        issuer
      }
      assetByPath1 {
        code
        issuer
      }
      assetByPath2 {
        code
        issuer
      }
      assetByPath3 {
        issuer
        code
      }
      assetByPath4 {
        issuer
        code
      }
      assetByPath5 {
        issuer
        code
      }
      assetBySendAsset {
        code
        issuer
      }
      destAssetNative
      path1Native
      path2Native
      path3Native
      path4Native
      path5Native
      sendAssetNative
      destAmount
      sendMax
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="manage-sell-offer"><a class="header" href="#manage-sell-offer">Manage sell offer</a></h1>
<pre><code class="language-graphql">query FullQuery {
  manageSellOfferByPublicKey(
    publicKeyText: &quot;$PUBLIC_KEY&quot;
  ) {
    edges {
      node {
        buyingNative
        accountBySource {
          publickey
        }
        assetByBuying {
          issuer
          code
        }
        assetBySelling {
          code
          issuer
        }
        ledgerByLedger {
          closeTime
          sequence
        }
        muxedaccountBySourceMuxed {
          id
          publickey
        }
        offerId
        priceD
        priceN
        sellingNative
      }
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="manage-buy-offer"><a class="header" href="#manage-buy-offer">Manage buy offer</a></h1>
<pre><code class="language-graphql">query FullQuery {
  manageBuyOfferByPublicKey(
    publicKeyText: &quot;$PUBLIC_KEY&quot;
  ) {
    edges {
      node {
        buyingNative
        accountBySource {
          publickey
        }
        assetByBuying {
          issuer
          code
        }
        assetBySelling {
          code
          issuer
        }
        ledgerByLedger {
          closeTime
          sequence
        }
        muxedaccountBySourceMuxed {
          id
          publickey
        }
        offerId
        priceD
        priceN
        sellingNative
      }
    }
  }
}

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="create-passive-sell-offer"><a class="header" href="#create-passive-sell-offer">Create passive sell offer</a></h1>
<pre><code class="language-graphql">query FullQuery {
  createPassiveSellOfferByPublicKey(publicKeyText: &quot;$PUBLIC_KEY&quot;) {
    nodes {
      accountBySource {
        publickey
      }
      amount
      assetByBuying {
        code
        issuer
      }
      assetBySelling {
        code
        issuer
      }
      buyingNative
      ledgerByLedger {
        closeTime
        sequence
      }
      muxedaccountBySourceMuxed {
        id
        publickey
      }
      priceD
      priceN
      sellingNative
    }
  }
}

</code></pre>
<p>n</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="change-trust"><a class="header" href="#change-trust">Change trust</a></h1>
<pre><code class="language-graphql">query FullQuery {
  changeTrustByPublicKey(publicKeyText: &quot;$PUBLIC_KEY&quot;) {
    nodes {
      accountBySource {
        publickey
      }
      assetByLineAsset {
        issuer
        code
      }
      ledgerByLedger {
        closeTime
        sequence
      }
      limit
      lineNative
      poolshareByLinePoolShare {
        assetA
        assetB
        fee
      }
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="allow-trust"><a class="header" href="#allow-trust">Allow trust</a></h1>
<p>Mercury supports indexing this operation, but it was deprecated as of protocol 17.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
